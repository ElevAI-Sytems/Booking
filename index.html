<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Diamond Nails â€¢ Book Your Appointment</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b1020;         /* deep navy */
      --bg-soft:#0f1530;
      --card:#0f1224;
      --ink:#e6e8ef;        /* near-white text */
      --muted:#a7b0c9;      /* muted text */
      --primary:#ff4d6d;    /* rose */
      --primary-2:#ff8fa3;  /* light rose */
      --accent:#87f0ff;     /* aqua accent */
      --ok:#10b981;         /* success */
      --warn:#f59e0b;       /* warning */
      --err:#ef4444;        /* error */
      --glass: rgba(255,255,255,.06);
      --glass-stroke: rgba(255,255,255,.12);
      --radius: 22px;
      --shadow: 0 18px 60px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--ink);
      font-family:"Plus Jakarta Sans", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1200px 700px at -15% -10%, rgba(255,77,109,.20), transparent 60%),
        radial-gradient(900px 600px at 115% -10%, rgba(135,240,255,.20), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg-soft));
      overflow-x:hidden;
    }
    /* FLOATING ORBS */
    .orb{position:absolute; filter:blur(40px); opacity:.45; mix-blend:screen; animation:float 14s ease-in-out infinite}
    .o1{width:280px;height:280px;background:#ff7a98; left:-60px; top:-40px}
    .o2{width:340px;height:340px;background:#55e9ff; right:-80px; top:-60px; animation-delay:2s}
    .o3{width:220px;height:220px;background:#b07cff; left:50%; bottom:-80px; transform:translateX(-50%); animation-delay:4s}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(12px)}}

    .wrap{max-width:880px; margin:0 auto; padding:28px}

    .card{
      position:relative; background:var(--glass); border:1px solid var(--glass-stroke);
      border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden; backdrop-filter: blur(16px);
    }

    .hero{position:relative; padding:34px 28px 18px;}
    .brand{display:flex; align-items:center; gap:14px}
    .logo{width:48px;height:48px;border-radius:14px; display:grid;place-items:center; background:linear-gradient(135deg, var(--primary), var(--primary-2)); box-shadow:0 8px 28px rgba(255,77,109,.45)}
    .brand h1{margin:0; font-family:"Playfair Display", serif; font-weight:700; letter-spacing:.4px; font-size:28px}
    .tag{margin:6px 0 0; color:var(--muted)}

    .ribbon{position:absolute; right:18px; top:18px; font-size:12px; padding:6px 10px; border-radius:999px; color:#0b1220; background:linear-gradient(90deg,#ffe4ec,#c1f7ff)}

    .form{padding:20px 24px 28px}
    .section-title{margin:4px 0 14px; font-weight:800; color:#ffffff; letter-spacing:.3px}

    label{display:block; font-weight:700; margin:0 0 8px; color:#f6f7fb; font-size:14px}
    .req{color:var(--primary-2)}

    input,select,textarea{
      width:100%; border:1.5px solid rgba(255,255,255,.12); background:rgba(255,255,255,.03);
      color:var(--ink); border-radius:16px; padding:14px 14px; font-size:15px; font-weight:600; transition:.2s;
    }
    input::placeholder, textarea::placeholder{color:#9aa3be}
    input:hover,select:hover,textarea:hover{border-color:rgba(255,255,255,.22)}
    input:focus,select:focus,textarea:focus{outline:none; border-color:var(--accent); box-shadow:0 0 0 6px rgba(135,240,255,.14), 0 10px 28px rgba(0,0,0,.25); transform:translateY(-1px)}

    .two{display:grid; grid-template-columns:1fr 1fr; gap:14px}
    @media (max-width:640px){.two{grid-template-columns:1fr}}

    .row{margin-bottom:16px; animation:fadeUp .4s ease both}
    .row:nth-child(1){animation-delay:.02s}
    .row:nth-child(2){animation-delay:.05s}
    .row:nth-child(3){animation-delay:.08s}
    .row:nth-child(4){animation-delay:.11s}
    .row:nth-child(5){animation-delay:.14s}
    .row:nth-child(6){animation-delay:.17s}

    @keyframes fadeUp{from{opacity:0; transform:translateY(6px)}to{opacity:1; transform:translateY(0)}}

    .hint{font-size:12px; color:var(--muted); margin-top:6px}
    .err{display:none; color:var(--primary-2); font-weight:800; font-size:12px; margin-top:6px}

    .actions{margin-top:10px}
    .btn{
      width:100%; border:0; border-radius:16px; padding:15px; font-weight:900; letter-spacing:.3px; cursor:pointer;
      color:#0b1220; background:linear-gradient(135deg,#ffe2ea,#b7f3ff); box-shadow:0 16px 40px rgba(255,77,109,.25), 0 6px 16px rgba(135,240,255,.2);
      transition:transform .18s ease, box-shadow .18s ease, filter .2s ease;
    }
    .btn:hover{transform:translateY(-2px); box-shadow:0 24px 50px rgba(255,77,109,.32), 0 8px 18px rgba(135,240,255,.25)}
    .btn[disabled]{opacity:.7; cursor:not-allowed; transform:none; filter:grayscale(.2)}

    .footer{padding:14px; text-align:center; color:var(--muted); border-top:1px solid rgba(255,255,255,.08)}
    .footer strong{color:#fff}

    .toast{display:none; padding:14px; border-radius:14px; font-weight:800; margin-bottom:16px}
    .toast.ok{background:linear-gradient(135deg,rgba(16,185,129,.2),rgba(16,185,129,.12)); border:1px solid rgba(16,185,129,.5); color:#bfffe6}
    .toast.err{background:linear-gradient(135deg,rgba(239,68,68,.18),rgba(239,68,68,.1)); border:1px solid rgba(239,68,68,.45); color:#ffd5d5}

    /* subtle shake on invalid submit */
    .shake{animation:shake .35s ease}
    @keyframes shake{10%,90%{transform:translateX(-1px)}20%,80%{transform:translateX(2px)}30%,50%,70%{transform:translateX(-4px)}40%,60%{transform:translateX(4px)}}

    /* success modal */
    dialog{border:0; border-radius:18px; padding:0; background:#12142a; color:var(--ink); width:min(520px,92vw); box-shadow:var(--shadow)}
    .modal{padding:22px}
    .modal h3{margin:0 0 8px; font-family:"Playfair Display", serif; font-size:26px}
    .modal p{margin:4px 0 0; color:var(--muted)}
    .modal .okbtn{margin-top:16px; padding:12px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.16); background:rgba(255,255,255,.06); color:#fff; font-weight:800; cursor:pointer}
    /* ===== Fix 1: dropdown contrast (native select + options) ===== */
    select{color:var(--ink); background-color:#141a33;}
    option{color:#e6e8ef; background-color:#141a33;}
    select:disabled{opacity:.6}

    /* ===== Fix 2: remove background seam on scroll ===== */
    body::before{
      content:""; position:fixed; inset:0; z-index:-1; pointer-events:none;
      background:
        radial-gradient(1200px 700px at -15% -10%, rgba(255,77,109,.22), transparent 60%),
        radial-gradient(900px 600px at 115% -10%, rgba(135,240,255,.22), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg-soft));
      will-change:transform; /* GPU hint prevents banding */
    }

    /* ===== Fix 3: tighter mobile layout & safe areas ===== */
    @media (max-width:480px){
      .wrap{padding:16px}
      .hero{padding:26px 18px 12px}
      .brand h1{font-size:22px}
      .two{grid-template-columns:1fr; gap:10px}
      input,select,textarea{font-size:16px; padding:13px 12px; border-radius:14px}
      .btn{padding:14px}
    }
  </style>
</head>
<body>
  <!-- floating ambience -->
  <div class="orb o1"></div>
  <div class="orb o2"></div>
  <div class="orb o3"></div>

  <div class="wrap">
    <div class="card" role="region" aria-labelledby="formTitle">
      <div class="hero">
        <span class="ribbon">Instant email confirmation</span>
        <div class="brand">
          <div class="logo" aria-hidden="true">ðŸ’…</div>
          <div>
            <h1 id="formTitle">Diamond Nails</h1>
            <div class="tag">Book in 60 seconds â€” modern, simple, professional</div>
          </div>
        </div>
      </div>

      <div class="form" id="formRoot">
        <div class="toast ok" id="okToast" role="status" aria-live="polite">âœ” Booking sent â€” check your inbox for confirmation.</div>
        <div class="toast err" id="errToast" role="alert">âœ– Please fix the highlighted fields.</div>

        <div class="section-title">Your details</div>
        <form id="bookingForm" novalidate>
          <!-- honeypot -->
          <input type="text" name="company" id="company" autocomplete="off" tabindex="-1" style="position:absolute;left:-9999px;opacity:0" aria-hidden="true" />

          <div class="row">
            <label for="clientName">Full name <span class="req">*</span></label>
            <input id="clientName" name="clientName" type="text" placeholder="e.g. Sarah Johnson" minlength="2" maxlength="100" required />
            <div class="err" id="clientName_err">Enter your name (min 2 characters).</div>
          </div>

          <div class="two">
            <div class="row">
              <label for="clientEmail">Email <span class="req">*</span></label>
              <input id="clientEmail" name="clientEmail" type="email" placeholder="your@email.com" required />
              <div class="err" id="clientEmail_err">Enter a valid email.</div>
            </div>
            <div class="row">
              <label for="clientPhone">Phone (UK) <span class="req">*</span></label>
              <input id="clientPhone" name="clientPhone" type="tel" placeholder="07XXX XXXXXX" pattern="^(\+44\s?7\d{3}|\(?07\d{3}\)?)\s?\d{3}\s?\d{3}$" required />
              <div class="hint">Format: 07xxx xxxxxx</div>
              <div class="err" id="clientPhone_err">Enter a valid UK mobile number.</div>
            </div>
          </div>

          <div class="section-title">Appointment</div>
          <div class="row">
            <label for="serviceType">Service <span class="req">*</span></label>
            <select id="serviceType" name="serviceType" required>
              <option value="">Select a serviceâ€¦</option>
              <option>Classic Manicure - Â£30</option>
              <option>Gel Manicure - Â£40</option>
              <option>Acrylic Full Set - Â£50</option>
              <option>Pedicure - Â£35</option>
              <option>Spa Pedicure - Â£45</option>
              <option>Nail Art - Â£15+</option>
              <option>Manicure & Pedicure Combo - Â£60</option>
            </select>
            <div class="err" id="serviceType_err">Choose a service.</div>
          </div>

          <div class="two">
            <div class="row">
              <label for="appointmentDate">Preferred date <span class="req">*</span></label>
              <input id="appointmentDate" name="appointmentDate" type="date" required />
              <div class="err" id="appointmentDate_err">Pick today or a future date.</div>
            </div>
            <div class="row">
              <label for="appointmentTime">Preferred time <span class="req">*</span></label>
              <input id="appointmentTime" name="appointmentTime" type="time" min="09:00" max="18:00" required />
              <div class="hint">Open 09:00â€“18:00</div>
              <div class="err" id="appointmentTime_err">Pick a time within business hours.</div>
            </div>
          </div>

          <div class="row">
            <label for="notes">Special requests (optional)</label>
            <textarea id="notes" name="notes" rows="4" maxlength="500" placeholder="Any colour preferences, length, allergiesâ€¦"></textarea>
            <div class="hint">Max 500 characters</div>
          </div>

          <div class="actions">
            <button class="btn" id="submitBtn" type="submit">
              <span id="btnText">Book my appointment âœ¨</span>
            </button>
          </div>

          <div class="hint" style="margin-top:12px">No payment collected here. Youâ€™ll get an email confirmation and a free cancellation link.</div>
        </form>
      </div>

      <div class="footer">Powered by <strong>ElevAI</strong> â€¢ Smart Automation for Local Businesses</div>
    </div>
  </div>

  <dialog id="successModal">
    <div class="modal">
      <h3>Booking sent ðŸŽ‰</h3>
      <p>Weâ€™ve emailed your confirmation. See you soon!</p>
      <button class="okbtn" onclick="document.getElementById('successModal').close()">Close</button>
    </div>
  </dialog>

  <script>
    // === CONFIG ===
    const WEBHOOK_URL = "https://elev0ai.app.n8n.cloud/webhook/diamond-nails-booking"; // exact production path
    const OPEN_HOUR = 9;   // 09:00
    const CLOSE_HOUR = 18; // 18:00

    // Min date = today in local tz
    (function(){
      const d = new Date();
      d.setHours(0,0,0,0);
      const isoLocal = new Date(d.getTime() - d.getTimezoneOffset()*60000).toISOString().split('T')[0];
      document.getElementById('appointmentDate').setAttribute('min', isoLocal);
    })();

    const form = document.getElementById('bookingForm');
    const okToast = document.getElementById('okToast');
    const errToast = document.getElementById('errToast');
    const successModal = document.getElementById('successModal');

    const inputs = ["clientName","clientEmail","clientPhone","serviceType","appointmentDate","appointmentTime"];

    function clearErrors(){
      errToast.style.display='none';
      inputs.forEach(id=>{
        const el = document.getElementById(id);
        el.classList.remove('shake');
        el.removeAttribute('aria-invalid');
        const e = document.getElementById(id+"_err");
        if(e) e.style.display='none';
      });
    }

    function invalidate(id, msg){
      const el = document.getElementById(id);
      const e = document.getElementById(id+"_err");
      if(e && msg) e.textContent = msg;
      if(e) e.style.display = 'block';
      el.setAttribute('aria-invalid','true');
      el.classList.add('shake');
    }

    function validate(){
      clearErrors();
      let ok=true;
      const name = document.getElementById('clientName').value.trim();
      const email = document.getElementById('clientEmail').value.trim();
      const phone = document.getElementById('clientPhone').value.trim();
      const svc = document.getElementById('serviceType').value;
      const date = document.getElementById('appointmentDate').value;
      const time = document.getElementById('appointmentTime').value;

      if(name.length < 2){ ok=false; invalidate('clientName'); }
      if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){ ok=false; invalidate('clientEmail'); }
      if(!/^(\+44\s?7\d{3}|\(?07\d{3}\)?)\s?\d{3}\s?\d{3}$/.test(phone)){ ok=false; invalidate('clientPhone'); }
      if(!svc){ ok=false; invalidate('serviceType'); }
      if(!date){ ok=false; invalidate('appointmentDate'); }
      if(!time){ ok=false; invalidate('appointmentTime'); }

      if(time){
        const h = parseInt(time.split(':')[0],10);
        if(isNaN(h) || h < OPEN_HOUR || h >= CLOSE_HOUR){ ok=false; invalidate('appointmentTime','Pick a time within business hours.'); }
      }

      if(date){
        const picked = new Date(date+"T00:00:00");
        const today = new Date(); today.setHours(0,0,0,0);
        if(picked < today){ ok=false; invalidate('appointmentDate','Date cannot be in the past.'); }
      }

      // honeypot
      if(document.getElementById('company').value){ ok=false; }

      return ok;
    }

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      okToast.style.display='none';
      if(!validate()){ errToast.style.display='block'; return; }

      const payload = Object.fromEntries(new FormData(form));
      const body = {
        clientName: payload.clientName,
        clientEmail: payload.clientEmail,
        clientPhone: payload.clientPhone,
        serviceType: payload.serviceType,
        appointmentDate: payload.appointmentDate,
        appointmentTime: payload.appointmentTime,
        notes: payload.notes || 'No special requests'
      };

      const btn = e.submitter || document.querySelector('.btn');
      btn.setAttribute('disabled','true');
      btn.querySelector('#btnText').textContent = 'Sendingâ€¦';

      try{
        const res = await fetch(WEBHOOK_URL, {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(body)});
        if(!res.ok) throw new Error('HTTP '+res.status);
        form.reset();
        okToast.style.display='block';
        successModal.showModal();
      }catch(err){
        console.error(err);
        errToast.style.display='block';
      }finally{
        btn.removeAttribute('disabled');
        btn.querySelector('#btnText').textContent = 'Book my appointment âœ¨';
        window.scrollTo({top:0, behavior:'smooth'});
      }
    });
  </script>
</body>
</html>
